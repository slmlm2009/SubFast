# Unified Project Structure

```plaintext
C:\subfast\                                    # Fixed installation path (required for registry)
├── scripts\                                   # Python scripts directory
│   ├── common\                               # Shared modules (v3.1.0+)
│   │   ├── __init__.py                       # Package initialization
│   │   ├── config_loader.py                  # Configuration management
│   │   ├── pattern_engine.py                 # Episode pattern recognition
│   │   └── csv_reporter.py                   # CSV report generation
│   ├── subfast_rename.py                     # Renaming feature script
│   └── subfast_embed.py                      # Embedding feature script
│
├── bin\                                       # Binary tools directory
│   └── mkvmerge.exe                          # Bundled MKVToolNix mkvmerge
│
├── resources\                                 # Resources directory
│   ├── data\                                 # External data files (v3.1.0+)
│   │   └── mkvmerge_language_codes.json     # ISO 639-2 language mappings
│   ├── subfast_logo.ico                      # Context menu icon
│   └── docs\                                 # Documentation
│       └── CONFIGURATION_README.md           # Detailed configuration guide
│
├── config.ini                                 # User configuration file
├── add_subfast_menu.reg                      # Registry installer
└── remove_subfast_menu.reg                   # Registry uninstaller

# Generated at runtime (in user directories):
<user_processing_directory>\
├── renaming_report.csv                       # Optional: Generated by rename script
├── embedding_report.csv                      # Optional: Generated by embed script
└── backups\                                  # Created by embed script on first success
    ├── original_video.mkv                    # Backed up original video
    └── original_subtitle.srt                 # Backed up original subtitle
```

## Directory Purpose:

**scripts/**
- Contains main Python script executables and shared modules
- Main scripts (subfast_rename.py, subfast_embed.py) handle feature-specific logic
- Directly executed by Python Launcher via Registry
- Shared logic extracted to common/ modules (v3.1.0+):
  - config_loader.py: Configuration management with auto-generation
  - pattern_engine.py: Episode pattern recognition with caching
  - csv_reporter.py: CSV report generation and statistics

**scripts/common/**
- Shared Python modules used by both main scripts (v3.1.0+)
- Eliminates code duplication (~1,600 lines)
- Single source of truth for configuration, patterns, and reporting
- Improves maintainability and testability

**bin/**
- Houses external binary dependencies (mkvmerge.exe)
- Allows bundled vs. user-provided tool flexibility
- Path configurable in config.ini

**resources/**
- Static assets: icons, documentation, external data
- Separate from executable code for clarity
- Documentation accessible without code modification
- data/ subdirectory contains external data files (v3.1.0+):
  - mkvmerge_language_codes.json: ISO 639-2 language code mappings
  - Allows adding languages without code changes

**Root Level:**
- config.ini: Easy user access for configuration
- Registry files: Simple installation/uninstallation

**User Directories:**
- Reports generated in processed directory for easy access
- Backups created locally for safety and disk space management

---
